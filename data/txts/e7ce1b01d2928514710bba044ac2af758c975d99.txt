Uncertainty in Multi-Commodity Routing Networks: When does it help?
Shreyas Sekar, Liyuan Zheng, Lillian J. Ratliff, and Baosen Zhang

arXiv:1709.08441v4 [cs.GT] 11 Jan 2018

Abstract—We study the equilibrium behavior in a multicommodity selﬁsh routing game with many types of uncertain users where each user over- or under-estimates their congestion costs by a multiplicative factor. Surprisingly, we ﬁnd that uncertainties in different directions have qualitatively distinct impacts on equilibria. Namely, contrary to the usual notion that uncertainty increases inefﬁciencies, network congestion actually decreases when users over-estimate their costs. On the other hand, under-estimation of costs leads to increased congestion. We apply these results to urban transportation networks, where drivers have different estimates about the cost of congestion. In light of the dynamic pricing policies aimed at tackling congestion, our results indicate that users’ perception of these prices can signiﬁcantly impact the policy’s efﬁcacy, and “caution in the face of uncertainty” leads to favorable network conditions.
Index Terms—Network Routing, Uncertainty, Nash Equilibrium, Transportation
I. INTRODUCTION
M ULTI-COMMODITY routing networks that allocate resources to self-interested users lie at the heart of many systems such as communication, transportation, and power networks (see, e.g., [1] for an overview). In all of these systems, users inherently face uncertainty and are heterogeneous. These users rarely have perfect information about the state of the system, and each have their own idiosyncratic objectives and tradeoffs between time, money, and risk [2]–[4]. Naturally, these private beliefs inﬂuence each user’s decision and, in turn, the total welfare of the overall system. In this paper, we provide an understanding of the effects of certain classes of uncertainties and user heterogeneity with respect to such uncertainties on network performance. In particular, we establish conditions on when they are helpful and harmful to the overall social welfare of the system.
A motivating example of a routing network that we use throughout this paper is the urban transportation network. Commuters in road networks simultaneously trade-off between diverse objectives such as total travel time, road taxes, parking costs, waiting delays, walking distance and environmental impact. At the same time, these users tend to possess varying levels of information and heterogeneous attitudes, and there is evidence [5], [6] to suggest that the routes adopted depend not on the true costs but on how they are perceived by the users. For instance, users prefer more consistent routes over those with high variance [7], seek to minimize travel time
All of the authors are associated with the Department of Electrical Engineering, University of Washington, Seattle, WA 981952500, USA. (email: {sekarshr, liyuanz8, ratliffl, zhangbao}@uw.edu).
This work was supported by NSF awards CNS-1634136 and CNS-1646912.

over parking costs [8], and react adversely to per-mile road taxes [9].
Furthermore, the technological and economic incentives employed by planners interact with user beliefs in a complex manner [10]. For example, to limit the economic losses arising from urban congestion, cities across the world have introduced a number of solutions including road taxes, timeof-day-pricing, road-side message signs and route recommendations [11]–[14]. However, the dynamic nature of these incentives (e.g., frequent price updates) and the limited availability of information dispersal mechanisms may add to users’ uncertainties and asymmetries in beliefs.
The effect of uncertainties on network equilibria has been examined in recent work [10], [15]–[17] where each user perceives the network condition to be different than the true conditions. The current results have mostly focused on simple network topologies (e.g., parallel links) or networks where a ﬁxed percentage of the population is endowed with a speciﬁc level of uncertainty. Given the complexity of most practical networks, it is natural to ask how uncertainty (i.e. user beliefs) affects equilibria in scenarios with many types of users, whose perceptions vary according to the user type. Speciﬁcally, in this work we answer the following two questions: (i) how do equilibria depend on the type and level of uncertainty in networks with multiple types of users, and (ii) when does uncertainty improve or degrade equilibrium quality?
To address these questions, we turn to a multi-commodity selﬁsh routing framework commonly employed by many disciplines (see, e.g., [18]–[21]). In our model, each user seeks to route some ﬂow from a source to a destination across a network and faces congestion costs on each link. These congestion costs are perceived differently by each user in the network, representing the uncertainties in their beliefs.
It is well-known that even in the presence of perfect information (every user knows the exact true cost), strategic behavior by the users can result in considerably worse congestion at equilibrium when compared to a centrally optimized routing solution [22]. Against this backdrop, we analyze what happens when users have imperfect knowledge of the congestion costs. A surprising outcome arises: in the presence of uncertainty, if users select routes based on perceived costs that over-estimate the true cost, the equilibrium quality is better compared to perfect information case. Conversely, if the users are not cautious and under-estimate the costs, the equilibrium quality becomes worse.

A. Contributions
We introduce the notion of type-dependent uncertainty in multi-commodity routing networks, where the uncertainty of users belonging to type θ is captured by a single parameter rθ > 0. Speciﬁcally, for each user of type θ, if their true cost on edge e is given by Ce(x) = aex + be, where x is the total population of users on this edge, then their perceived cost is rθaex + be.
For the majority of this work, we will focus on cautious behavior, where users over-estimate the costs (rθ ≥ 1), for all types θ. Some of our results will also hold for the case where users under-estimate the costs (rθ ≤ 1), for all types θ. The central message of this paper is that when users exhibit “caution in the face of uncertainty”, the social cost at the equilibrium is smaller compared to the case where users have perfect information (i.e. know the true congestion costs).
The following results are independent of network topology:
(a) The social cost—i.e. C(x) = e∈E xeCe(xe) where xe is the total population mass, summed over all user types, ﬂowing on edge e—of the equilibrium1 solution where all users have the same level of uncertainty (rθ = r for all θ) is always smaller than or equal to the cost of the equilibrium solution without uncertainty when r ∈ [1, 2] and vice-versa when r < 1.
(b) The worst-case ratio of the social cost of the equilibrium to that of the socially optimal solution (i.e. the price of anarchy [22]) is 4/(4rmaxγ − rm2 ax), where rmax = maxθ rθ and γ ≤ 1 is the ratio of the minimum to the maximum uncertainty over user types.
Constraining network topology, we show the following:
(a) The social cost of the equilibrium where a fraction of the users exhibit an uncertainty of r ∈ [1, 2] and the rest have no uncertainty is always smaller than or equal to the social cost of an identical system without uncertainty, as long as the network has the serially linearly independent topology (a subclass of seriesparallel networks [23]).
(b) In systems having users with and without uncertainty, the routing choices adopted by the uncertain users always results in an improvement in the costs experienced by users without uncertainty, as long as the graph has a series-parallel topology [23].
At a high level, the main contribution of this work can be viewed as a nuanced characterization of the instances (i.e. network topologies, levels of uncertainty) for which uncertainty is helpful in reducing the equilibrium congestion levels. We show that these characterizations are tight by means of illustrative examples where uncertainty leads to an increase in the social cost when our characterization conditions are violated. Finally, many of our results also extend gracefully to instances having polynomial edge cost functions, which are of the form C(x) = axd + b (see Section III-C).
To validate the theoretical results, we present a number of simulation results. We focus speciﬁcally on the application
1For the multi-commodity routing game studied in this work, the equilibrium is essentially unique as all equilibria induce the same ﬂow on the edges; see Proposition 1

of parking in urban transportation networks and consider realistic urban network topologies with two types of users: through trafﬁc and parking users. Given a parking population with uncertainties, we show that cautious behavior improves equilibrium quality while lack of caution degrades it even when uncertainty is asymmetric across user types and when the same user faces different levels of uncertainty on different parts of network.
B. Comparison with Other Models of Uncertainty
Our work is closely related to the extensive body of work on risk-averse selﬁsh routing [24]–[26] and pricing tolls in congestion networks [2], [10], [27]. The former line of research focuses on the well known mean-standard deviation model where each self-interested user selects a path that minimizes a linear combination of their expected travel time and standard deviation. While such an objective is desirable from a central planner’s perspective, experimental studies suggest that individuals tend to employ simpler heuristics when faced with uncertainty [28]. Motivated by this, we adopt a multiplicative model of uncertainty similar to [29]–[31].
The literature on computing tolls for heterogeneous users is driven by the need to implement the optimum routing by adjusting the toll amount, which is often interpreted as the time–money tradeoff, on each edge. It is possible to draw parallels between additive uncertainty models (such as the mean–standard deviation model) and tolling; speciﬁcally, tolling can be viewed as adjusting for users’ uncertainty. While tolls can be (within reason) arbitrarily decided, the system planner has little inﬂuence over the level of uncertainty among the users. Bearing this in mind, we strive for a more subtle understanding of how equilibrium congestion depends on the level of uncertainty. Moreover, while many of the results in this paper focus on the effect of over-estimating costs, different than the existing literature, we also study the effect of cost under-estimation.
Finally, our work is thematically similar to the recent paper on the informational Braess paradox [19] whose model can be viewed as an extreme case of our model where the uncertainty parameter rθ is so high on some edges (rθ → ∞) that users always avoid such edges. On the other hand, our model is more continuous as user attitudes are parameterized by a ﬁnite value of rθ, which allows for a more realistic depiction of the tradeoffs faced by users who must balance travel time, congestion, and uncertainty. Although both the characterizations make use of the serially linearly independent topology, it is worth pointing out that our results do not follow from [19] and require different techniques that capture a more continuous trade-off between uncertainty and social cost.
C. Organization
The rest of the paper is structured as follows. In Section II, we formally introduce our model followed by our main results in Sections III and IV. Section V presents our simulation results on urban transportation networks with parking and routing users who face different levels of uncertainty. Finally, we conclude with discussion in Section VI.

II. MODEL AND PRELIMINARIES
We consider a non-atomic, multi-commodity selﬁsh routing game with multiple types of users. Speciﬁcally, we consider a network represented as G = (V, E) where V is the set of nodes and E is the set of edges. For each edge e ∈ E, we deﬁne a linear cost function

Ce(xe) = aexe + be,

(1)

where xe ≥ 0 is the total population (or ﬂow) of users on that edge and ae, be ≥ 0. One can interpret Ce(·) as the true cost or expected congestion felt by the users on this edge. However, due to uncertainty, users may perceive the cost on each edge e ∈ E to be different from its true cost.
To capture that users may have different perceived uncertainties, we introduce the notion of type. Speciﬁcally, we consider a ﬁnite set of user types T , where each type θ ∈ T is uniquely deﬁned by the following tuple (sθ, tθ, µθ, rθ). The parameter µθ > 0 denotes the total population of users belonging to type θ such that each of these inﬁnitesimal users seeks to route some ﬂow from its source node sθ ∈ V to the destination node tθ ∈ V . Moreover, the parameter rθ > 0 captures the beliefs or uncertainties associated with users of type θ and affects the edge cost in the following way: users of type θ perceive the cost of edge e ∈ E to be

Cˆeθ(xe) = rθaexe + be.

(2)

For illustration, consider an urban transportation network. Then be may represent the constant travel time on a link (in the absence of other vehicles) and aexe, the congestiondependent component of the travel time. A multiplicative uncertainty of rθ > 1 indicates that users of type θ adversely view costs arising due to congestion (e.g., waiting in trafﬁc) when compared to other costs. Alternatively, aexe could also represent a congestion-dependent toll or tax that is commonly
levied in transportation infrastructure such as highways or parking, and the parameter rθ captures the time-money tradeoff [32].
A path p ∈ Pθ is a sequence of edges connecting sθ to tθ. Deﬁne Pθ to be the set of all sθ–tθ paths in G. Let xθp ∈ R be the total ﬂow routed by users of type θ on path p ∈ Pθ. We use the notation x = (xθp)θ∈T ,p∈Pθ ∈ R|T |·|Pθ| for a network ﬂow and xθ = (xθp)p∈Pθ to denote the network ﬂow of type θ ∈ T . Then, for each type θ ∈ T , deﬁne the set of feasible
ﬂows to be
Xθ = {xθ| p∈Pθ xθp = µθ, xθp ≥ 0, ∀p ∈ Pθ}. (3)
The action space of users of type θ is Xθ—that is, users of type θ choose a feasible ﬂow xθ ∈ Xθ. Further, deﬁne the joint action space X = (Xθ)θ∈T —i.e. the space of feasible ﬂows for all user types.
Path ﬂows induce edge ﬂows. Let xθe ∈ R be the ﬂow on edge e due to users of type θ. The edge and path ﬂow for users of type θ are related by

xθe = p∈Pθ,e∈p xθp. Deﬁne the total ﬂow on edge e to be

xe = θ∈T xθe.

Then, using this notation, we write the path cost in terms of edge ﬂow. For any path p,

Cp(x) = e∈p Ce(xe) = e∈p(aexe + be).

(4)

Similarly, the perceived path costs are given by Cˆpθ(x) = e∈p Cˆeθ(xe) = e∈p rθaexe + be. (5)

Deﬁne the game instance

G = {(V, E), T , X , (Pθ)θ∈T , (sθ, tθ, µθ, rθ)θ∈T , (Ce)e∈E }.

The game instance G captures all of the relevant information about the multi-commodity routing game including the notion of type-based uncertainty we are interested in studying.

A. Nash Equilibrium Concept
We assume that the users in the system are self-interested and route their ﬂow with the goal of minimizing their individual cost. Therefore, the solution concept of interest in such a setting is that of a Nash equilibrium, where each user type routes their ﬂow on minimum cost paths with respect to their perceived cost functions and the actions of the other users.
Deﬁnition 1 (Nash Equilibrium): Given a game instance G, a feasible ﬂow x ∈ X is said to be a Nash equilibrium if for every θ ∈ T , for all p ∈ Pθ with positive ﬂow, xθp > 0,

Cˆpθ(x) ≤ Cˆpθ (x), ∀ p ∈ Pθ

(6)

For the rest of this work, we will assume that all the ﬂows considered are feasible.
Remark 1 (User Beliefs): For the sake of completeness and to understand how an equilibrium is reached, we brieﬂy comment on each user’s beliefs about the uncertainties of the other users. We assume that type-based uncertainty is not only known within the type but across all types—that is, a user of type θ knows the uncertainty levels of the users of all other types. While a user knowing the uncertainty level within its own type may not be unreasonable, full knowledge of the uncertainties of the other types is a strong assumption.
This being said, for the types of games we consider—games admitting a potential function, which we formally deﬁne in Proposition 1—a number of myopic learning rules2 converge to Nash equilibria (see, e.g., [33] and references therein). We are currently investigating layered belief structures coupled with a Bayesian Nash equilibrium concept. Some recent work has investigated such structures in a routing game context [34]; however, it is well known that equilibria in these types of games are computationally difﬁcult to resolve.

B. Social Cost and Price of Anarchy
One of the central goals in this work is to compare the quality of the equilibrium solution in the presence of uncertainty to the socially optimal ﬂow as, e.g., computed by a centralized
2By myopic learning rules, we mean rules for iterated play that require each player to have minimal-to-no knowledge of other players’ cost functions and/or strategies.

planner with the goal of minimizing the aggregate cost in the system. Speciﬁcally, the social cost of a ﬂow x is given by

C(x) = e∈E Ce(xe)xe.

(7)

Note that the social cost is only measured with respect to the true congestion costs and thus does not reﬂect users’ beliefs or uncertainties.
To capture inefﬁciencies, we leverage the well-studied notion of the price of anarchy which is the ratio of the social cost of the worst-case Nash equilibrium to that of the socially optimal solution. Formally, given an instance G of a multi-commodity routing game belonging to some class C of instances (a class refers to a set of instances that share some property) suppose that x∗ is the ﬂow that minimizes the social cost C(x) and that x˜ is the Nash equilibrium for the given instance, then the price of anarchy is deﬁned as follows.
Deﬁnition 2 (Price of Anarchy): Given a class of instances C, the price of anarchy for this class is

maxG∈C C(x˜)/C(x∗).

(8)

Since, we study a cost-minimizing game, the price of anarchy is always greater than or equal to one.

III. MAIN RESULTS
To support these main theoretical results, we ﬁrst show that our game is a potential game. Routing games that fall into the general class of potential games have a number of nice properties in terms of existence, uniqueness, and computability [33]. General multi-commodity, selﬁsh routing games with heterogeneous users, however, do not belong to the class of potential games unless certain assumptions on the edge cost structure are met [20].
In our case, since we have linear latencies for each type and the uncertainty parameter only appears on the aexe term for each edge, the following proposition states that the game instances of the form we consider admit a potential function and hence, there always exists a Nash equilibrium [20].
Proposition 1: A feasible ﬂow x is a Nash equilibrium for a given instance G of a multi-commodity routing game with uncertainty vector (rθ)θ∈T if and only if it minimizes the following potential function:
Φr(x) = e∈E 21 aex2e + be θ∈T r1θ xθe (9)
Moreover, for any two minimizers x, x , Ce(xe) = Ce(xe) for every edge e ∈ E.
Note that although users perceive the multiplicative uncertainty rθ on the ae term (see Equation (2)), the parameter appears in the denominator of the be term in the potential function above. Conceptually, these have a similar effect: dividing Equation (6) by rθ on both sides, one can obtain equivalent equilibrium conditions where the rθ term is present in the denominator of the constant be.
Proof: By deﬁnition, a feasible ﬂow x ∈ X is a Nash equilibrium if the following condition is satisﬁed for all θ ∈ T and for all p, p ∈ Pθ with xθp > 0:
e∈p(rθaexe + be) ≤ e∈p (rθaexe + be).

Since rθ > 0, this is equivalent to e∈p(aexe + rbeθ ) ≤ e∈p (aexe + rbeθ ). The remainder of proof trivially follows
from standard arguments pertaining to the minimizer of a
convex function. See [33] for more detail. The second part of the proposition indicates that the equi-
libria are essentially unique as the cost on every edge is the
same across solutions.

A. Effect of Uncertainty on Equilibrium Quality

Our ﬁrst main result identiﬁes a special case of the general multi-commodity game for which uncertainty helps improve equilibrium quality—i.e. decreases the social cost—whenever users over-estimate their costs by a small factor and vice-versa when they under-estimate costs. To show this result, we need the following technical lemma.
Lemma 1: Given an instance G of a multi-commodity selﬁsh routing game with Nash equilibrium x˜ = (x˜e)e∈E , we have that for any feasible ﬂow x,

C(x˜) − C(x) ≤ − θ∈T ( r2θ − 1) e∈E be∆xθe, (10)
where ∆xθe = x˜θe − xθe. The proof of the above lemma is provided in Appendix A.
Given an instance G of the multi-commodity routing game, we deﬁne G1 to be the corresponding game instance with no uncertainty—that is, G1 has the same graph, cost functions, and user types as G, yet rθ = 1 for all θ ∈ T .
Theorem 1: Consider any given instance G of the multicommodity routing game with Nash equilibrium x˜ and the corresponding game instance G1, having no uncertainty, with Nash equilibrium x1. Suppose rθ = r for all θ ∈ T . Then, the following hold:
1) C(x˜) ≤ C(x1) if 1 ≤ r ≤ 2. 2) C(x˜) ≥ C(x1) if 0 ≤ r ≤ 1.
Remark: What happens when the users are highly cautious, i.e., rθ > 2 for all θ? Due to the presence of a few negative examples where the social cost increases in the presence
of uncertainty, we cannot conclusively state that uncertainty
helps or hurts for all instances. However, these negative
instances appear to be isolated—both our price of anarchy
result (Theorem 2) and our experiments (Section V) validate
our claim that caution in the face of uncertainty helps the users by lowering equilibrium social costs even when rθ > 2—i.e., uncertainty is favorable when the users are very cautious. It
is however, interesting to note that although under-estimation
always leads to a worse equilibrium, over-estimation may lead
to better or worse equilibria. Proof of Theorem 1: Let Φr(x) denote the potential func-
tion for the instance G and Φ1(x) denote the potential function for G1 where Φ1 is given in (9) with r = 1. By deﬁnition of the potential function, we know that Φr(x˜) − Φr(x1) ≤ 0 and Φ1(x1) − Φ1(x˜) ≤ 0. Expanding these two inequalities, we get that

e∈E ae2x˜2e + be

θ∈T x˜rθe − ae(x21e)2 − be

x1e,θ θ∈T r

≤ 0,

and
e∈E

ae(x21e)2 + be

θ∈T

x1e,θ

−

ae x˜2e 2

− be

θ∈T x˜θe ≤ 0,

where x1e,θ denotes the total ﬂow on edge e by users of type θ in the solution x1. Let us deﬁne ∆xθe = x˜θe − x1e,θ, and ∆xe = x˜e − x1e. By summing the above inequalities, the ae terms cancel out giving us

e∈E be

(

∆

x

θ e

− ∆xθ)

=

θ∈T r

e

e∈E be

θ∈T ( 1r − 1)∆xθe

where the right-hand side is less than or equal to zero. Using the fact that θ ∆xθe = ∆xe for all edges, we get that

( 1r − 1) e∈E be∆xe ≤ 0.

(11)

Hence,

1) When r > 1, ( 1r − 1) < 0 so that 2) When r < 1, ( 1r − 1) > 0 so that

e∈E be∆xe ≥ 0. e∈E be∆xe ≤ 0.

We ﬁnish the proof by considering two separate cases: (case

1) 1 ≤ r ≤ 2 and (case 2) r < 1.

Let us consider (case 1) where 1 ≤ r ≤ 2. Applying Lemma 1 to the instance G with x = x1, we obtain that

C(x˜) − C(x1) ≤ (1 − 2r ) e∈E be∆xe.

(12)

We claim that when r ∈ (1, 2], the right-hand side of (12) is
lesser than or equal to zero. This is not particularly hard to deduce owing to the fact that (1 − 2r ) < 0 in the given range and that e∈E be∆xe ≥ 0 as deduced from (11). Therefore, C(x˜) − C(x1) ≤ 0, which proves the claim that uncertainty
with a limited amount of caution helps lower equilibrium costs.
Now, let us consider (case 2) where r < 1. Applying Lemma 1 to the instance G1 with x = x˜, and using the fact that ∆xe = x˜e − x1e, we have that

C(x1) − C(x˜) ≤ ( 2r − 1) e∈E be∆xe.

(13)

Once again when r < 1, we know that 2r − 1 > 0 and from (6), we can deduce that e∈E be∆xe ≤ 0 in the given range.

The following corollary identiﬁes a speciﬁc level of uncer-
tainty at which the equilibrium solution is actually optimal.
Corollary 1: Given an instance G of the multi-commodity routing game, let x˜ denote its Nash equilibrium and x∗ denote
the socially optimal ﬂow. If rθ = 2 for all θ ∈ T , then C(x˜) = C(x∗)—i.e. the equilibrium is socially optimal.
Proof: Suppose rθ = r = 2. Then, applying Lemma 1, we have that C(x˜) − C(x∗) ≤ −( 2r − 1) e∈E be − ∆xe = 0.

B. Price of Anarchy Under Uncertainty
In Theorem 1, we showed that the equilibrium cost under uncertainty decreases (resp. increases) when users are mildly cautious (resp. not cautious) and all user types have the same level of uncertainty. This naturally raises the question of quantifying the improvement (or degradation) in equilibrium quality and whether uncertainty helps when the uncertainty parameter can differ between user types. In the following theorem, we address both of these questions by providing price of anarchy bounds as a function of the maximum uncertainty in the system and γ, which is the ratio between the minimum and maximum uncertainty among user types.

Theorem 2: (Price of Anarchy) For any multi-commodity routing game G, the ratio between the social cost of the Nash equilibrium to that of the socially optimal solution is at most

P oA(G) = 4/(4γrmax − rm2 ax),

(14)

where rmax = maxθ∈T rθ, and γ = mmainxθθ rrθθ as long as rmax < 4γ.

Before proving Theorem 2, we remark on the price of

anarchy and its dependence on the level of uncertainty. The

price of anarchy in (14) is plotted in Fig. 1 as a function of

rmax for three different values of γ. This result validates our

message that uncertainty helps equilibrium quality when users

over-estimate their costs and hurts equilibrium quality when

users under-estimate their costs. To understand why, let us ﬁrst

consider the case of γ = 1—i.e. the uncertainty is the same

across user types. We already know that in the absence of

uncertainty, the price of anarchy of multi-commodity routing

games with linear costs is given by 4/3 [22]; this can also be

seen by substituting rmax = 1, γ = 1 in (14). We observe

that the price of anarchy is strictly smaller than 4/3 for

rmax ≤ 2 and reaches the optimum value of 1 at rmax = 2

thereby conﬁrming Corollary 1. More interestingly, even when

rmax > 2, the price of anarchy with uncertainty is smaller than

that without uncertainty, afﬁrming our previous statement that

cautious behavior helps lower congestion (at least in the worst

case).

Similarly, as rmax decreases away from one, the price of

anarchy increases nearly linearly. In fact, our price of anarchy

result goes one step beyond Theorem 1 as it provides guaran-

tees even when different user types have different uncertainty

levels. For example, when rmax = 1.5, and γ = 0.9—

i.e. minθ rθ ≈ 1.35—the price of anarchy is 1.24, which

is still better than the price of anarchy without uncertainty.

The price of anarchy result reveals a surprising observation:

as long as rmax > 1 and γ is not too large, for any given

instance G of the multi-commodity routing game, either the

equilibrium quality is already good or uncertainty helps lower

congestion by a signiﬁcant amount. Therefore, uncertainty

rarely hurts the quality of the equilibrium and often helps.

In order to prove Theorem 2, we need the following

technical lemma whose proof is provided in Appendix B.

Lemma 2: For any two non-negative vectors of equal length,

(x1, x2, . . . , xn) and (x1, x2, . . . , xn), let x =

n i=1

xi

and

x=

n i=1

xi.

Moreover,

let

r

=

(r1, r2, . . . , rn)

be

another

vector of length n whose entries are strictly positive. Then, if

we let r∗ = mini ri and r∗ = maxi ri, for any given function

f (y) = ay + b with a, b ≥ 0, we have that

f (x )x + nif=(1x()xxi−xi)f (rix) ≤ 4 4r∗ − (r∗)2 −1 ,

(15)

Proof of Theorem 2: Consider some instance G of the multi-commodity routing game with equilibrium x˜. Then, adopting the variational inequality conditions for a Nash equilibrium [15], [22], for any other solution x, and every user type θ ∈ T ,

e∈E (rθaex˜e + be) x˜θe − xθe = e∈E Ce(rθx˜e)(x˜θe − xθe)

≤ 0.

(16)

price of anarchy

2.0

=1

= 0.95

= 0.9

no uncertainty

1.5

1.00.5unce1r.0taint1y.5para2m.0 eter2,.5rmax3
Fig. 1. Price of anarchy as a function of rmax = maxθ rθ for multicommodity selﬁsh routing games for three different values of γ = mmainxθθ rrθθ . Smaller values of price of anarchy are favorable as they indicate that the cost of the equilibrium solution is comparable to the social optimum. In general, we observe that when rmax > 1, the price of anarchy under uncertainty is smaller than that without uncertainty and vice-versa for rmax < 1. Yet, too much caution or large asymmetries in the uncertainty level across user types can also lead to poor equilibrium. For a ﬁxed value of γ, we observe that the price of anarchy drops initially as rmax increases and then starts increasing once again beyond a certain threshold.

must hold. Fix any edge e ∈ E. Let (x1, . . . , xn) = (x˜θe)θ∈T , x = θ∈T x˜θe, (x1, . . . , xn) = (x∗eθ)θ∈T , and x = θ∈T x∗eθ. Applying Lemma 2 with f (y) = Ce(y) and r = (rθ)θ∈T , we have that

Ce(x˜e)x˜e ≤ ζ(Ce(x∗e)x∗e + θ∈T (x˜θe − x∗eθ)Ce (xerθ))

where

ζ = 4/(4rmin − rm2 ax) = 4/(4γrmax − rm2 ax),

(17)

and where rmin = minθ∈T rθ and rmax = maxθ∈T rθ. We claim that

e∈E Ce(x˜e)x˜e ≤ ζ e∈E θ∈T (x˜θe − x∗eθ) (rθaex˜e + be)

+ e∈E Ce(x∗e)x∗e

≤ ζ e∈E Ce(x∗e)x∗e.

(18)

Recall from (16) that for any type θ ∈ T , e∈E (rθaex˜e + be) x˜θe − xθe ≤ 0. Since the price of
anarchy is deﬁned as e∈E Ce(x˜e)x˜e , a worst case bound of ζ
e∈E Ce(x∗e )x∗e
follows from Equation (18), giving us the theorem statement.

It is worth mentioning that the proof of the above theorem carries over even when each user type has a different uncertainty parameter on each edge. For example, suppose that rθ(e) denotes the uncertainty parameter corresponding to users of type θ on edge e ∈ E. In this general model, a similar price of anarchy bound can be shown. Indeed, the price of anarchy in this case is
PoA(G) = maxe∈E 4/(4γ(e)rmax(e) − rm2 ax(e)),
where γ(e) = minθ∈T rθ(e)/(maxθ∈T rθ(e)) and rmax(e) = maxθ∈T rθ(e).

C. Extensions to Polynomial Cost Functions
We now generalize our results in another direction by considering multi-commodity routing games where the edges

have polynomial cost functions. Speciﬁcally, we consider games where the cost function on any edge e ∈ E is of the form Ce(x) = aexd + be, such that the degree d ≥ 1, and a, b ≥ 0. This class of polynomial cost functions is referred to as shifted monomials of degree d [35], and has received considerable attention in the literature owing to applications in transportation [36]–[38]— e.g., link performance as a function of the number of cars on a road can be modeled as a shifted monomial function of degree four [36].
We now show that both of our results from this section extend gracefully to the case where the edges have shifted monomial cost functions. In fact, when the edge cost functions are super-linear, uncertainty leads to more favorable results than the linear cost case. Informally, as the degree of the monomial d grows, we show that uncertainty leads to a decrease in the social cost for a larger range of the parameter rθ. For convenience, we will assume that all edges have shifted monomial cost functions with the same degree d ≥ 1.
We begin by a identifying the potential function that the Nash equilibrium solution minimizes for a generalization of the multi-commodity routing game where every edge e ∈ E has the true cost function Ce(x) = aexd + be, which users of type θ ∈ T perceive as Cˆeθ(x) = rθaexd + be. Therefore, equilibrium existence is guaranteed for this more general class of functions.

Φd,r(x) =

e∈E

1 d+1

aexde+1

+

be

θ∈T r1θ xθe

(19)

The following result generalizes Theorem 1 to games with shifted monomial cost functions.
Proposition 2: Consider any given instance G of the multicommodity routing game with shifted monomial cost functions of degree d having Nash equilibrium x˜ and the corresponding game instance G1, having no uncertainty, with Nash equilibrium x1. Suppose rθ = r for all θ ∈ T . Then, the following hold:
1) C(x˜) ≤ C(x1) if 1 ≤ r ≤ d + 1. 2) C(x˜) ≥ C(x1) if 0 ≤ r ≤ 1.
In comparison to Theorem 1 where uncertainty results in a decrease in social cost for r ∈ [1, 2], we observe (surprisingly) that the range of the uncertainty parameter under which caution yields an improvement in social cost increases linearly with d, i.e., uncertainty is more helpful as the cost function is more convex. On the other hand, the under-estimation of costs increases social cost regardless of the degree of the polynomial. The key idea involved in the proof of Proposition 2 is a strict generalization of Lemma 1 via a potential function argument, to obtain the following difference in costs: C(x˜) − C(x) ≤ − θ∈T ( dr+θ1 − 1) e∈E be(x˜θe − xθe). Recall that in the previous inequality x˜ is the equilibrium solution for a given instance G and x is an arbitrary feasible ﬂow for the same instance. The rest of the proof is analogous to that Theorem 1.
Next, we generalize the price of anarchy bounds from Theorem 2.
Proposition 3: For any multi-commodity routing game G with shifted monomial cost functions of degree d, the ratio

price of anarchy

3.0

d=1

2.5

d=2 d=3

2.0

1.5

1.0

0.5

1.0 1.5 2.0 2.5 3.0
uncertainty parameter,

rm3.a5x

4

Fig. 2. Price of anarchy as a function of rmax = maxθ rθ for multicommodity selﬁsh routing games for three different values of d when edge cost functions are shifted monomials of degree d. Smaller values of price of anarchy are favorable as they indicate that the cost of the equilibrium solution is comparable to the social optimum. In general, we observe that when rmax > 1, the price of anarchy under uncertainty is smaller than that without uncertainty and vice-versa for rmax < 1— this is true for all values of d. Interestingly, for d > 1, uncertainty leads to near-optimal price of anarchy even for large values of rmax (e.g., rmax = 3.5)— this is not the case when d = 1. This validates our premise that as the degree of the polynomial cost function increases, user uncertainty becomes more helpful to the system welfare.

between the social cost of the Nash equilibrium to that of the socially optimal solution is at most

(d + 1)(d+1)/d

P oA(G) =

, (20)

γrmax(d + 1)(d+1)/d − drm(da+x1)/d

where rmax = maxθ∈T rθ, and γ = mmainxθθ rrθθ as long as rmax < ( γd )d(d + 1)(d+1). Substituting d = 1 in the above equation, we obtain Theorem 2
as a special case. In the absence of uncertainty, it is known
that as d grows large, the price of anarchy bound grows as O( logd(d) ) [39]. Assuming γ = 1, for a constant rmax, the price of anarchy bound from Equation (20) grows as O( rmax dlog(d) ). For a ﬁnite value of d, the improvement in the price of anarchy
is much more signiﬁcant as illustrated in Fig. 2.

IV. THE EFFECT OF HETEROGENEITY ON CONGESTION
Now that we have a better understanding of how uncertainty affects the performance of the entire system as measured by the social cost, we move on to a more nuanced setting where different users have different levels of uncertainty. Our goal in this section is to understand the effect of this heterogeneity in uncertainty on the equilibrium congestion by studying the following two questions: (i) how do the routing choices adopted by the uncertain users impact the cost of the users without uncertainty, and (ii) when is the equilibrium social cost of a system with heterogeneous uncertainties smaller than the social cost incurred when all users have no uncertainty?

A. Notation and Graph Topologies
To isolate the effect of heterogeneity on equilibrium congestion, we restrict our attention to a selﬁsh routing game on an undirected network. There are two user types, i.e. T =

{θ1, θ2}. Users belonging to both these types seek to route their ﬂow between source node s and destination node t. Finally, the uncertainty levels for the two user types are speciﬁed as rθ1 = 1 and rθ2 = r > 0, and so, users of type θ1 are without uncertainty. We refer to this as the two-commodity game with and without uncertainty. We slightly abuse notation and use G = {G, T , (s, t), (µθ1 , µθ2 ), (1, r), (Ce)e∈E } to refer to an instance of this game, and P to represent the set of s-t paths in G.
Unlike the previous sections, where we made no assumptions on the graph structure, our next characterizations will depend crucially on the network topology. Speciﬁcally, we will consider two well-studied topologies: series-parallel and linearly independent graphs. We provide the respective deﬁnitions below.
Deﬁnition 3: (Series-Parallel [23]) An undirected graph G with a single source s and destination t is said to be a seriesparallel graph if no two s-t paths pass through an edge in opposite directions.
There are a number of other equivalent deﬁnitions for this class of graphs; e.g., a graph is said to be series-parallel if it does not contain an embedded Wheatstone network [23]. Series-parallel graphs are an extremely well-studied topology that naturally arise in a number of applications pertaining to network routing. We refer the reader to [23], [40] for more details.
Deﬁnition 4: (Linearly Independent [23]) An undirected graph G with a single source s and destination t is said to be linearly independent if every s-t path contains at least one edge that does not belong to any other s-t path.
Our ﬁnal deﬁnition involves a simple extension of the above topology to include linearly independent graphs connected serially. Formally, a graph G = (V, E) is said to consist of two sub-graphs G1 = (V1, E1) with source-destination pair (s1, t1) and G2 = (V2, E2) with source-destination pair (s2, t2) connected in serial if V = V1 ∪ V1 with t1 = s2 and E = E1 ∪ E2.
Deﬁnition 5: (Serially Linearly Independent (SLI)) An undirected graph G with a single source s and destination t is said to belong to the serially linearly independent class if (i) G is linearly independent or (ii) G consists of two linearly independent graphs connected in serial.
This extended topology was ﬁrst introduced in [19]. These three topologies are related as:
1) Every linearly independent graph belongs to the serially linearly independent class.
2) Every serially linearly independent graph belongs to the series-parallel class.
The ﬁrst part follows from Deﬁnition 5. The second part is due to the fact that any linearly independent network is seriesparallel (proved in [23]) and the property that when two seriesparallel graphs are connected in series, the resulting graph is also series-parallel. Since series-parallel graphs happen to be the most general topology studied in this section, (without loss of generality) we focus on undirected graphs because every edge can be uniquely traversed only in one direction.

B. Impact of Uncertain Users on Users without Uncertainty

We begin by studying what happens to the congestion cost faced by the users without uncertainty as the uncertainty level increases for the other users. This question is of considerable interest in a number of settings. For example, in urban transportation networks, the uncertainty about where a driver can ﬁnd available street parking can often cascade into increased congestion for other drivers leading to a detrimental effect on the overall congestion cost [38], [41]–[43].
The following theorem shows a somewhat surprising result. As long as the network topology is series-parallel, the aggregate cost felt by users of type θ1 (users without any uncertainty) always reduces when users of θ2 are uncertain about the costs. In other words, the behavior under uncertainty by one type of users always decreases the congestion costs of other types of users who do not face any uncertainty.
Theorem 3: Given an instance G of the two-commodity game with and without uncertainty such that the graph G is series-parallel, let G1 denote a modiﬁed version of this instance with no uncertainty (i.e. rθ1 = rθ2 = 1). Let x˜ and x1 denote the Nash equilibrium for the two instances, respectively. Then,

Cθ1 (x˜) ≤ Cθ1 (x1).

(21)

where Cθ1 (x) = users of type θ1.

e∈E Ce(xe)xθe1 is the aggregate cost of

Proof: It is well-known that [23, Lemma 3] for a series-

parallel graph G and any two feasible ﬂows x, x , there exists

a s–t path p with xp > 0, such that for every edge e ∈ p, xe ≤ xe. Now, consider ﬂows x1 and x˜. Applying the previous property, we get that, there exists a path p with x1p > 0 such that for all e ∈ p, x˜e ≤ x1e.
We now bound both Cθ1 (x˜) and Cθ1 (x1) in terms of the

cost of the path p. Speciﬁcally, note that in the solution x1,

the path p has non-zero ﬂow on it so that

Cθ1 (x1) = µθ1 e∈p Ce(x1e).

(22)

However, in the solution x˜, we know that every user of type θ1 is using a minimum cost path with respect to the true costs and therefore, the cost of any path used by type θ1 is at least that of the path p. Formally,

Cθ1 (x˜) ≤ µθ1 e∈p Ce(x˜e) ≤ µθ1 e∈p Ce(x1e). (23)

The ﬁnal inequality follows from the monotonicity of the cost functions and the fact that x˜e ≤ x1e for all e ∈ p. Therefore, we conclude that Cθ1 (x˜) ≤ Cθ1 (x1).

C. Characterization of Instances where Heterogeneity Helps
We now consider the impact of heterogeneity on the system performance as a whole and present a simple characterization based on the network topology and the level of uncertainty, where the presence of uncertainty (among a fraction of the user population) results in a decrease in the equilibrium social cost. Speciﬁcally, we show that for SLI networks, as long as the uncertainty level of users belonging to type θ2 is at most two (i.e., 1 ≤ r = rθ2 ≤ 2), the social cost of the equilibrium solution is always smaller than or equal to that of the equilibrium when there is no uncertainty.

Before showing our theorem, we state the following tech-

nical lemma whose proof is deferred to Appendix C.

Lemma 3: Given any instance G of the two-commodity

routing game with and without uncertainty where the graph G

is linearly independent, let y and y1 denote the Nash equilibria

of instances G and G1 respectively. Then, it must be the case

that

ypθ1 ≤ yp1 ∀p ∈ P.

(24)

Informally, the above lemma states that given equilibrium ﬂows y and y1 for any arbitrary instance G and its uncertaintyfree variant G1, the equilibrium solutions must satisfy the property that for any path p, the ﬂow on this path in the absence of uncertainty (instance G1) must be greater than or equal to its magnitude due to the uncertainty-free users in G.
Theorem 4: Consider any given instance G of the twocommodity game with and without uncertainty. Let x˜ denote the Nash equilibrium of this game and the corresponding game instance G1, having no uncertainty has Nash equilibrium x1. Then, as long as G belongs to the serially linearly independent class and 1 ≤ r ≤ 2,
C(x˜) ≤ C(x1)

Proof of Theorem 4: Each SLI network can be broken down into a sequence of linearly independent networks connected in series. Applying Deﬁnition 5 recursively, we get a sequence of linearly independent sub-graphs G(1) = (V (1), E(1)), G(2) = (V (2), E(2)), . . . , G( ) = (V ( ), E( )) with source-destination pairs (t0, t1), (t1, t2), . . . , (t −1, t ) respectively ( note that t0 = s, t = t), that are connected in series—i.e., G1 is connected in series with G2 such that the destination t1 for G1 acts as the origin for G2. By deﬁnition, the set of edges in these subgraphs are mutually disjoint.
Secondly, given the equilibrium ﬂow x˜ on G for instance G, we can divide this ﬂow into components (x˜(1), x˜(2), . . . , x˜( )) such that for every 1 ≤ i ≤ , x˜(i) is the sub-ﬂow of x˜ on the graph G(i), and for every e ∈ E(i), x˜(i)e = x˜e. Finally, it is not hard to see that x˜(i) must be an equilibrium of the sub-instance of G restricted to the graph G(i).
Given this decomposition, we apply Lemma 3 to each G(i). Consider any index i: since the graph G(i) is linearly independent, we can apply Lemma 3 and get that for any ti−1ti path p in G(i), x˜(i)θp1 ≤ x1(i)p.
Suppose that P(i) denotes the set of ti−1-ti paths in G(i). Then, by Lemma 4 provided in Appendix D,

C(x˜) = e∈E Ce(x˜e)x˜e = e∈E (aex˜e + be)x˜e

≤ e∈E Ce(x1e)x1e + (2aex˜e + be)(x˜e − x1e)

≤ C(x1) + e∈E (2aex˜e + be)(x˜e − x1e)

(25)

so that, using the above decomposition,

C(x˜) ≤ C(x1) + i=1 e∈E(i)(2aex˜(i)e + be) · (x˜(i)e − x1(i)e)

= C(x1) + i=1 p∈P(i) · (x˜(i)p − x1(i)p)

e∈p(2aex˜(i)e + be)

Therefore, to complete the proof it is sufﬁcient to show that p∈P(i) e∈p(2aex˜(i)e + be) (x˜(i)p − x1(i)p) ≤ 0 for all
1≤i≤ . Fix an arbitrary index i and consider the corresponding
graph G(i) and ﬂows x˜(i) and x1(i). Recall that x1(i) is the equilibrium solution in the absence of uncertainty and therefore, minimizes the following potential function

Φ1(x) =

e∈E (i) (

1 2

ae(xe)2

+

bexe).

so that, again by Lemma 4,

0 ≤ Φ1(x˜(i)) − Φ1(x1(i))

=

e∈E (i)

ae 2

(x˜(i)e)2

+

bex˜(i)e

−

ae 2

(x1(i)e)2

−

bex1(i)e

≤ e∈E(i)(aex˜(i)e + be)(x˜(i)e − x1(i)e). (26)

Next, we claim that the term e∈E(i)(raex˜(i)e + be)(x˜(i)e − x1(i)e) ≤ 0. Indeed, for convenience deﬁne Dr =
e∈E(i)(raex˜(i)e + be)(x˜(i)e − x1(i)e) so that

Dr = p∈P(i) e∈p(raex˜(i)e + be)(x˜(i)p − x1(i)p)

= p∈P(i) e∈p(raex˜(i)e + be)(∆xp)

= p∈P(i)− e∈p(raex˜(i)e + be)(∆xp)

+ p∈P(i)+ e∈p(raex˜(i)e + be)(∆xp),

(27)

where ∆xp = x˜(i)p −x1(i)p and P(i)−, P(i)+ refer to the set
of the paths where ∆xp ≤ 0 and ∆xp > 0, respectively. From Lemma 3, we know that x˜(i)θp1 ≤ x1(i)p for all p ∈ P(i). Therefore, if ∆xp = x˜(i)θp1 + x˜(i)θp2 − x1(i)p > 0 for any p ∈ P(i), it must be the case that x˜(i)θp2 > 0 for that path. In other words, we have that for every p ∈ P(i)+, x˜(i)θp2 > 0. Recall that x˜(i)θp2 denotes the total ﬂow due to the users with uncertainty on path p.
We make the following two observations that help us
simplify (27). First, by ﬂow conservation, we know that p∈P(i) ∆xp = 0. Second, for every p ∈ P(i)+, we have
that x˜(i)θp2 > 0, and so p is a min-cost path for the users with uncertainty in the ﬂow x˜(i) . This in turn implies that for any p ∈ P(i) and p ∈ P(i)+, the following inequality is valid:

e∈p(raex˜(i)e + be) ≤ e∈p (raex˜(i)e + be). (28) Deﬁne crp := minp∈P(i) e∈p(raex˜(i)e + be). Then, using the fact ∆xp ≤ 0 for all p ∈ P(i)− and that e∈p(raex˜(i)e + be) ≥ crp for all p ∈ P(i)−, (27) can be rewritten as

Dr = p∈P(i)− e∈p(raex˜(i)e + be)(∆xp) + p∈P(i)+ e∈p crp(∆xp)
≤ p∈P(i)− e∈p crp(∆xp) + p∈P(i)+ = crp p∈P(i) ∆xp = 0

e∈p crp(∆xp) (29)

so that

e∈E(i)(raex˜(i)e + be)(x˜(i)e − x1(i)e) ≤ 0 (30)
Summing inequalities (30) and (26), we see that the be terms cancel out, leaving us with

(r − 1) e∈E(i) aex˜(i)e(x˜(i)e − x1(i)e) ≤ 0

which implies that

e∈E(i) aex˜(i)e(x˜(i)e − x1(i)e) ≤ 0

(31)

since r > 1. This, in turn, implies that

(2 − r) e∈E(i) aex˜(i)e(x˜(i)e − x1(i)e) ≤ 0 (32)

since r ≤ 2. Adding (32) to (30), we get that

e∈E(i)(2aex˜(i)e + be)(x˜(i)e − x1(i)e) ≤ 0.

The above inequality in combination with (25) yields the theorem.

D. Tightness of Results: Negative Examples
Our central result in this section (Theorem 4) shows that for networks having the SLI topology with a limited amount of uncertainty (r ∈ [1, 2]), the social cost at equilibrium in the presence of uncertainty is always smaller than or equal to the social cost without any uncertainty. Naturally, this raises the question of whether the result is tight—i.e. what happens when the graph does not belong to the SLI class or if r > 2. In this section, we show the tightness of our results by illustrating examples where uncertainty leads to an increase in congestion costs when either one of the above requirements fail.
1) Series-Parallel Networks where Uncertainty Hurts: Fig. 3 depicts an example of a network that is series-parallel but not SLI, where the equilibrium cost when a small fraction of users have an uncertainty of r = 2 becomes strictly larger than the cost when all users have no uncertainty. The details of the equilibrium solutions for this example are listed in Table I. Contrasting our result in Theorem 4, this example indicates that for networks that violate the SLI topology, the helpful effects of uncertainty are not guaranteed even when r ∈ [1, 2]. Note that when r ∈ [1, 2], uncertainty can lead to an increase in social cost only when it is exhibited by a (small) fraction of users. This is because when the entire population has an uncertainty parameter of 1 ≤ r ≤ 2, we know by Theorem 1 that the social cost must decrease for all graph topologies.

TABLE I A DETAILED DESCRIPTION OF THE FLOW ON EACH PATH AND SOCIAL COST IN THE ABSENCE AND PRESENCE OF UNCERTAINTY: IN THE LATTER CASE, A SMALL POPULATION OF = 0.05 USERS HAVE AN UNCERTAINTY OF r = 2. THE EQUILIBRIUM FLOWS FOR THE PATHS THAT ARE NOT SPECIFIED ARE ZERO. NOTE THAT 529010 = 2.955 > 6221 ≈ 2.9524 AND
THEREFORE, THE EQUILIBRIUM SOCIAL COST IN THE ABSENCE OF UNCERTAINTY IS STRICTLY SMALLER.

Instance Certain Uncertain

Equilibrium Flow

xp1

=

241 ,

xp2

=

37 ,

xp3

=

8 21

xp1

=

1610 ,

xp2

=

2630 ,

xp3

=

2630 ,

xp4

=

1 2

Cost 62/21 591/200

2) Networks with Large Uncertainty, i.e., r > 2: We now provide an example of a simple two-link Pigou network where the equilibrium social cost with uncertainty r = 3 is strictly larger than the equilibrium cost without any uncertainty. This example illustrates that even for networks that fall within the SLI class (parallel links are the most trivial class of networks), uncertainty can be detrimental to social cost when r > 2.

e1, 5x + 2

On-Street Parking o1

s

e2, x

e4,

23 15

.5x + 1.5 t e3, 1 i
e5, 3x + 1

Fig. 3. An example of a series-parallel network that is not SLI, where all trafﬁc originates at node s and terminates at t. The label on each edge represents its identity and cost. For the two-commodity game with and without uncertainty, the total population is 1 and a population of = 0.05 users have an uncertainty factor of r = 2. We label the ﬁve source-destination paths as p1 (e1), p2(e2, e3), p3(e2, e5), p4(e4, e3), and p5(e4, e5). The social cost for this example in the presence of uncertainty is strictly larger than the social cost in the absence of uncertainty, indicating that for networks that violate the SLI condition, uncertainty does not always improve equilibrium quality.

0.25x + 2.5

e1

s

t

e2

x

Fig. 4. A two link Pigou network. We consider a two-commodity game with and without uncertainty, where the total population is one: a population of 0 < ≤ 1 users have an uncertainty parameter of r = 3. For every > 0, the equilibrium social cost without uncertainty is strictly smaller than the social cost with uncertainty.

Consider the instance depicted in Fig. 4. In the absence of uncertainty, the entire population uses e2, resulting in a social cost of Ce2 (1) = 1. Next, suppose that a population of ≤ 1 users have an uncertainty level of r = 3. If ≤ 2/15, then all users route their ﬂow on e1, and the social cost of the equilibrium solution with uncertainty is given by Ce1 ( ) + C2(1 − )1 − = 1 + 0.5 + 1.25 2 which is strictly greater than Ce2 (1), the social cost without uncertainty. When
> 2/15, only 2/15–th of the users prefer e1, and the increase in social cost follows from the = 2/15 case.
V. CASE STUDIES
In this section, we present our main simulation results on both stylistic as well as realistic urban network topologies comprising of two types of users—i.e. through trafﬁc, parking users (types θ1, θ2, respectively)—each associated with a single commodity. We consider the more general edge-dependent uncertainty model that was brieﬂy mentioned at the end of Section III and assume that the parking users have different uncertainty levels on different parts of the network and the through trafﬁc does not suffer from uncertainty at all. For any given edge e ∈ E, we assume that Ceθ(x) and Cˆeθ(x) denote the actual and perceived cost of edge e by users of type θ. We vary the level of uncertainty faced by the parking users, and observe its effect on the social cost at equilibrium.

b

s

t

o2

t2
Garage

Fig. 5. A special case of our general multi-commodity network with two types of users: parking users and through trafﬁc. All of the network trafﬁc originates at the source node s. Users belonging to the through trafﬁc population simply select a (minimum-cost) path from s to t and incur the latencies on each link. The parking users select between one of two parking structures: on-street parking (indicated in green) with additional circling costs and off-street parking (e.g., parking garage).

Despite the generality of the model considered here— different user types have different beliefs and the level of uncertainty depends on the edge under consideration—our simulations validate the theoretical results presented in the previous section. In particular, when the parking users are cautious (over-estimate the congestion cost due to cruising and waiting for a parking spot), we observe that the social cost of the equilibrium decreases in both our experiments. On the other hand, the behavior of parking users who under-estimate the cost incurred due to searching for a parking spot leads to a worse-cost equilibrium.

A. Effect of Uncertainty on On-Street vs Garage Parking

Inspired by the work in [38] which provides a framework for integrating parking into a classical routing game that abstracts route choices in urban networks, we begin with a somewhat stylized example of an urban network, depicted and described in Fig. 5. The users looking for a parking spot are faced with two options: (i) on-street parking which, as in reality, is cheaper but leads to larger wait times due to cruising in search of parking; (ii) an off-street or a private garage option that is much easier to access (in terms of wait times) at the expense of a higher price.
To understand the costs faced by the parking users (type θ2), let Eos be the set of edges in the on-street parking structure (the green edges in Fig. 5). For parking users that select the on-street option, the cost on edges e ∈ Eos are of the form

Ceθ2 (xe) = Ceθ,2 (xe) + Ceθ,2os(xe),

(33)

where Ceθ,2 (xe) = aexe + be is the travel latency part of the cost and Ceθ,2os(xe) = aosxe + bos is the parking part of the cost. Fig. 5 is easily converted into a two-commodity network
by creating a fake edge e˜ from node o1 to t2 that has the
accumulated parking costs from the edges in Eos—i.e.

Ce˜θ2 (xe˜) = e∈Eos Ceθ,2os(xe˜) = a¯osxe˜ + ¯bos. (34)

Then, the costs on edges in Eos are re-deﬁned to only contain the travel latency component of the cost, and this is the same for both types of users: for e ∈ Eos,

Ceθ1 (xe) = Ceθ2 (xe) = aexe + be.

(35)

on-street parking flow [%] equilibrium inefficiency

1.3

100

social optimum

eq. w/o uncertainty

75

1.2

eq. w/ uncertainty

50 25

0.5

1

.0

u

n

2.0
certai

n

ty

3.0
para

m

e

te4r.,0r

5.0

1.1

1.0

0

0.5

1.0
un

ce

r

2.0
tainty

p

a

3.0
ram

e

te

r

,4r.0

5.0

Fig. 6. The left plot shows the on-street parking population ﬂow (mass) under the social optimum and the Nash equilibrium with and without uncertainty as r, the level of uncertainty of the parking users, varies. The right plot shows the equilibrium quality as measured by the ratio of the social cost of the Nash equilibrium to that of the social optimum as a function of r. True costs of off-street options are notoriously more expensive than on-street options. As r increases, we observe from the left plot that more users move away from on-street parking, which in turn affects the social cost as seen from the right plot. In particular, when r > 1, the users over-estimate both on-street and garage wait times leading to a decrease in social cost as more users choose the garage option. On the other hand, for r < 1, users view the garage option adversely, which leads to more congestion. We note that these observations are consistent with empirically observed human behavior [44] suggesting that an increase in cost from a lower point of reference is seen as more of a loss than a marginal increase in cost from a higher point of reference. At r ≈ 2, the users divide themselves optimally between the on-street and garage options leading to full efﬁciency; as r increases beyond 2, the equilibrium is still better than the case without uncertainty, yet no longer optimal.

For the off-street parking structure, the edge, say e , from o2 to t2 has cost

Ceθ2 (xe ) = apgxe + bpg

(36)

and all other edges in the network have costs

Ceθ1 (xe)

=

C

θ e

2

(x

e

)

=

aexe

+

be.

(37)

The price on-street is generally lower than that of a private garage, whereas the inequality is reversed for wait times. Parking garages typically comprise of a larger capacity than on-street parking options and one expects this to be reﬂected in the a¯os and apg terms.
The uncertainty is faced by users of type θ2 only on the costs pertaining to parking such that the congestion-dependent component of their parking cost is multiplied by a parameter r > 0. This captures the notion that the users may face uncertainty regarding the number of other users competing for the same parking spots(s) or the capacity of each structure. In the converted two commodity network, this translates to

Cˆe˜θ2 (xe˜) = ra¯osxe˜ + ¯bos

where e˜ is the fake edge from o1 to t2 and

Cˆeθ2 (xe ) = rapgxe + bpg

where e is the edge from o2 to t2. As mentioned previously, the through trafﬁc population (type θ1) does not suffer from uncertainty on any of its edges and therefore, rθ1 (e) = 1 with respect to every edge e.
Note that although the uncertainty only applies to the parking users, their decision also affects the through trafﬁc users as both user types share a subset of the edges on their routes. This phenomenon has been commonly observed in cities where non-parking users often face congestion due to the circling behavior of drivers looking for parking [42].
For the simulations, we assume that there is a total population mass of 2 originating at the source node s, comprising

of an equal number of parking and through trafﬁc users. The edge congestion functions are selected uniformly at random from a suitable range. The costs on the parking structures are set as follows:
1) On-Street Parking: The on-street parking structure is assumed to contain a ﬁxed number of parking spots, and the parameter a¯os is chosen to be inversely proportional to this quantity. The constant term ¯bos captures the price paid by drivers for on-street parking and is selected based on parking prices commonly used in large cities multiplied by a constant that captures how users tend to trade-off between time (congestion) and money.
2) Off-street Parking: Off-street parking is assumed to have a large number of available parking spots; thus, we set apg = 0. The parameter bpg is set to be the price of offstreet parking (e.g., a garage) multiplied by the same trade-off parameter as above.
Fig. 6 shows how the parking users divide themselves among the on-street and garage option (left plot) and how this affects equilibrium quality as r varies (right plot). From the left plot, we observe that at the social optimum, approximately 51% of the parking population prefers on-street parking. With no uncertainty (i.e. when r = 1), at the Nash equilibrium more parking users (around 80%) gravitate towards the cheaper onstreet option leading to higher congestion and inefﬁciency— that is, even without uncertainty, the system is inefﬁcient as is expected. This is reminiscent of the classic Pigou example [39] in trafﬁc networks.
As r increases—that is, as users become more cautious in their beliefs about parking congestion—more users start ﬂocking to the off-street option due to the fact that they perceive a multiplicative increase in the congestion-dependent term. This results in an improvement to efﬁciency. On the contrary, for users who tend to under-estimate parking costs (r < 1), the appeal of parking in off-street options decreases

and more users ﬂock towards on-street parking leading to increased congestion and poor equilibrium quality.
The effect of the above behavior on equilibrium quality can be seen in the right-hand plot in Fig. 6. The graph indicates that a cautious approach under uncertainty (users overestimating costs) helps improve equilibrium quality, whereas lack of caution results in enhanced congestion in the network. In fact, we notice when r < 1, the price of anarchy increases in a rather steep fashion as r decreases. Finally, we observe that even though our theoretical results guarantee an improvement in equilibrium congestion only in the range of 1 ≤ r ≤ 2, our simulation results lend credence to the claim that even highly cautious behavior (r > 2) can lead to a decrease in the social cost i.e., users over-estimating the costs in the face of uncertainty is always preferable to a lack of uncertainty.
B. Parking vs. Through Trafﬁc in Downtown Seattle
In a similar manner to the toy example, we take a realworld urban trafﬁc network (depicted in Fig. 7) that captures a slice of a highly congested area in downtown Seattle. The network contains both on-street and off-street parking options and the parking population experiences both a travel latency cost and a parking cost, both of which we model as afﬁne functions. Once again, this can be converted to a standard two-commodity instance by adding a new (fake) destination node tθ2 and including fake edges from (i) the top left and bottom right nodes in the on-street parking zone (boundary nodes on the blue colored dotted area in Fig. 7a) to tθ2 ; (ii) the node containing the parking garage (marked with a ‘P’ symbol in Fig. 7a) to tθ2 . By adding fake edges from only speciﬁc boundary nodes in the on-street parking area, we are able to capture the added congestion due to the cruising and circling behavior exhibited by users searching for parking spots. As with our previous example, we assume that the through trafﬁc faces no uncertainty (rθ1 (e) = 1 for all edges) and the parking users face an uncertainty parameter of r > 0 only on the fake edges, which affects their perception of the parking costs.
For the simulations, we assume that the parking trafﬁc originates at a few select nodes in the network (indicated in magenta in Fig. 7) and wishes to route their ﬂow to either an on-street parking slot or a garage. On the other hand, the through trafﬁc originates at every node in the network and has a single destination, which represents drivers seeking to leave the downtown area via state highway 99.
The parameters for our simulations were chosen similarly to the example in Section V-A. Speciﬁcally, the cost functions for the two parking structures were based on an estimation of the number of available parking slots (which inﬂuence the wait times), and the hourly price for parking for both onstreet and garage parking in Seattle. Furthermore, owing to the uniformity of the downtown roads, we assumed that all edges in the network have the same congestion cost function, which were sufﬁciently scaled in order to ensure that the parking costs are comparable to the transit costs.
As seen in Fig. 7a, in the downtown Seattle network, the equilibrium without uncertainty is sub-optimal as more parking users select the cheaper on-street option. This leads

(a) Flow intensity for r = 1

(b) Flow intensity for r = 1.5

equilbrium inefficiency

1.3

social optimum

eq. w/o uncertainty

eq. w/ uncertainty

1.2

1.1

1.0

0.5

1.0 2.0
uncertainty

p3a.r0amete4r.,0r

5.0

(c) Equilibrium inefﬁciency as a function of r

Fig. 7. Setup and results for the parking and through trafﬁc example modeled on a region of downtown Seattle. In (a) and (b), the network superimposed on the corresponding area in downtown Seattle is shown. The parking population originates at the magenta nodes, whereas the through trafﬁc begins at every grey node and terminates at the green node. The blue dotted box represents the on-street parking zone and the parking symbol (‘P’) is the location of the off-street parking garage. The color on each edge depicts the intensity of ﬂow on that edge: the intensity increases as the color transitions from gray to red.

to heavy congestion in the network (indicated by the red edges) as parking users distributed across the network approach the on-street parking area. That being said, the equilibrium without uncertainty is not as sub-optimal as the simple network in Fig. 5 as the cost functions are more symmetric and parking users who originate closer to the parking garage prefer using that option despite the higher price.
In the presence of uncertainty, we observe an interesting phenomenon. When the parking users are cautious, the garage option becomes more preferable to users who are equidistant from both parking locations. The parking users distribute themselves more evenly across the two options, which in turn leads to lesser congestion in the middle of the network.
It is well-known that sub-optimal behavior by the parking users can cascade and lead to increased congestion for through trafﬁc [42]. Our simulation results indicate that the routes adopted by the parking users under uncertainty helps alleviate some of this congestion.
Fig. 7c shows the inefﬁciency of each of the equilibria as a function of the uncertainty parameter value of the parking users. Speciﬁcally, at r ≈ 2, the equilibrium solution coincides with the socially optimal ﬂow. On the other hand, for r < 1, the social cost of the equilibrium solution increases because

more users select the on-street parking option. This in turn leads to heavier congestion in the rest of the network. Once again, we observe that over-estimation can lead to a decrease in social cost even when r > 2 (up to r ≈ 2.5 in this case). However, unlike our results in Fig. 6, signiﬁcant cost over-estimation leads to large inefﬁciency— this is due to the speciﬁc placement of the parking garage in the downtown example. More precisely as r increases, a large fraction of the population favors the garage, whose location intersects with the route adopted by the through trafﬁc. Therefore, beyond a certain threshold, the negative effects of congestion outweigh the positive effects of users choosing the parking garage leading to sub-optimal equilibrium for r > 2.5.
We conclude by remarking that even though cautious behavior results in only a small improvement in the price of anarchy (see Fig. 7c), even a small improvement in daily congestion in downtown areas could result in economic gains.

VI. CONCLUSIONS AND FUTURE WORK
In this work, we consider a multi-commodity selﬁsh routing game where different types of users face different levels of uncertainty quantiﬁed by a multiplicative parameter rθ. Broadly classifying the user attitudes as cautious and notcautious, we provide several theoretical results highlighting the effect that when users over-estimate their network costs, equilibrium quality tends to improve and vice-versa when users under-estimate the costs. To our knowledge, this is the ﬁrst work that provides a characterization of equilibrium quality as a function of uncertainty in networks with multiple types of users, each facing a different level of uncertainty.
Although we focus on linear congestion cost functions, many of our results extend naturally to polynomial cost functions of the form Ce(xe) = aexed +be. In fact, we showed that uncertainty becomes more favorable as the degree d of the cost function increases. An important direction of future work is to extend the results to arbitrary convex functions.

APPENDIX
A. Proof of Lemma 1
Recall from Proposition 1 that the equilibrium solution x˜ minimizes the corresponding potential function Φr(x). Therefore, for any arbitrary ﬂow vector x , we have that Φr(x˜) − Φr(x ) ≤ 0. Indeed,

C(x ) = e∈E (aexe + be)xe = e∈E ae(xe)2 + be θ∈T 2 xreθ + be
θ
= 2Φr(x ) − e∈E be θ∈T ( r2θ − 1)xeθ.

θ∈T (1 − r2θ )xeθ (38)

Applying (38) to the solutions x˜ and x, we get that

C(x˜) − C(x) = 2Φr(x˜) − 2Φr(x) − e∈E be θ∈T ( r2θ − 1)(x˜θe − xθe) (39)
≤ − e∈E be θ∈T ( r2θ − 1)(x˜θe − xθe) (40) = − θ∈T ( r2θ − 1) e∈E be∆xθe. (41)
where the inequality (40) follows from the fact Φr(x˜) − Φr(x) ≤ 0.

B. Proof of Lemma 2

Fixing all of the vectors and the function in the left-hand side of

f (x )x + nif=(1x()xxi−xi)f (rix) ≤ 4 4r∗ − (r∗)2 −1 ,

(42)

we ﬁrst derive a lower bound on the denominator (i.e. identify when the denominator is minimized over the space of all valid instantiations of the parameter set). Let us begin with the second term in the denominator:

ni=1(xi − xi)f (rix) = ni=1(xi − xi)(riax + b)

=

n i=1

xiriax

−

n i=1

xiriax

+

b(x

−

x

)

≥

n i=1

xir∗ax

−

n i=1

xir∗ax

+

b(x

−

x

)

≥ xr∗ax − x r∗ax + b(x − x )

Using this upper bound on the rest of the terms in the denominator, we get that

f (x )x + ni=1(xi−xi)f (rix) ≥ a(x )2+bx+xr∗ax−x r∗ax.

For any given ﬁxed value of x, consider the function a(x )2 − x r∗ax: by basic calculus, its minimum value is attained if x = r∗2x . In other words, for any x, x , we can conclude that a(x )2 − x r∗ax ≥ (r∗)2 ax42 − (r∗)2 ax22 = −(r∗)2 ax42 . Substituting this lower bound into the above equation, we get
that

f (x ) + ni=1(xi − xi)f (rix) ≥ −(r∗)2 ax42 + bx + r∗ax2.

Now that we have removed the dependence on x , we can substitute this back into (15) to get that

f (x )x +

≤ f (x)x
ni=1(xi−xi)f (rix)

ax2 +bx − (r∗)42ax2 +bx+r∗ax2

≤ = ax2
− (r∗)42ax2 +r∗ax2

4 4r∗ −(r∗ )2

which completes the proof.

C. Proof of Lemma 3
We prove Lemma 3 via induction. Consider the following inductive claim.
Claim 1: Given instances I = {G, T , (s, t), (µθ1 , µθ2 ), (1, r), (Ce)e∈E } and I = {G, T , (s, t), (µθ1 , µθ2 ), (1, 1), (Ce)e∈E } where the graph G is linearly independent, let y and y1 denote the Nash equilibria of the two instances, respectively. Then, if
e∈p Ce(ye) ≤ e∈p Ce(ye1), ∀ p ∈ P s.t. ypθ1 > 0, (43)
it must be the case that ypθ1 ≤ yp1 for all p ∈ P. To prove Lemma 3, it is sufﬁcient to prove the above claim. Indeed, setting I = G and I = G1, we can directly apply the claim to prove the lemma statement. In order to verify that the condition from (43) is satisﬁed, ﬁrst observe that linearly independent networks are a special case of seriesparallel networks. Now, applying [23, Lemma 3] to the ﬂows y and y1 as deﬁned in the statement of Lemma 3, we get that there exists a path p∗ ∈ P with yp1∗ > 0 such that
e∈p∗ Ce(ye) ≤ e∈p∗ Ce(ye1). However, p∗ is a min-cost path in y1 and its cost in y is an upper-bound on that of

any min-cost path used by users of type θ1. This immediately implies that for any p with ypθ1 > 0 its cost in y (where it is a min-cost path for users of type θ1) must be smaller than or equal to its cost in y1 (where all users have no uncertainty).
The proof of Claim 1 proceeds by induction on the number of edges in the graph G = (V, E)—that is, given a graph G, we assume that the inductive claim holds for all instances deﬁned on any graph G = (V , E ) such that |E | < |E| and proceed from there.
We also state a property of linearly-independent graphs, which will be useful for our proof.
Proposition 4 ( [23, Proposition 5]): A two terminal network G is linearly-independent if and only if: (i) it consists of a single edge, or (ii) it is the result of connecting two linearly-independent networks in parallel, or (iii) it is the result of connecting in series a linearly independent network and a network with a single edge.
Proof of Claim 1: Let us start with the base case. The inductive hypothesis is trivially true when the graph G consists of a single edge between the source and sink (i.e. E = {e}). All of the users must route their ﬂow on this edge only, regardless of their uncertainty level. Since we are given (by assumption) that the instance satisﬁes the condition that
Ce(ye) ≤ Ce(ye1),
by monotonicity of the cost functions, we get that ye ≤ ye1. Of course, this implies that yeθ1 ≤ ye1 and the inductive claim thus holds for the base case.
Now, let us consider the inductive case. Consider the inductive claim with respect to an arbitrary linearly independent graph G = (V, E) consisting of two or more edges, and assume that the inductive hypothesis holds for all instances deﬁned on linearly independent graphs G = (V , E ) such that |E | < |E|. From Proposition 4, we know that G consists of two subgraphs G1 = (V1, E1) and G2 = (V2, E2) connected either in parallel or in series with |E2| = 1 (i.e., G2 is simply a single edge). We consider both cases, apply the inductive claim recursively to both sub-graphs, and merge the resulting ﬂows to prove the inductive claim for the original graph G.
Let (s1, t1), (s2, t2) denote the origin-destination pairs for G1 and G2 respectively. We use P1 to denote the set of s1-t1 paths in G1 and P2 to denote the set of s2-t2 paths in G2. When G1 and G2 are connected in series (case 1), we have that s2 = t1. When they are connected in parallel (case 2), s1 = s2, t1 = t2. We treat each of these cases separately.
(case 1) Subgraphs connected in series. We ﬁrst introduce some additional notation required for this part of the proof. As we did in the proof of Theorem 4, we use y(1) and y(2) to denote the sub-ﬂows of y with respect to graphs G1 and G2. Similarly, we deﬁne y1(1) and y1(2) to be the sub-ﬂows of y1. Recall that G2 consists simply of a single edge.
Since y is an equilibrium for I, it must be the case that y(1) and y(2) are equilibria for G1, G2 respectively for suitably deﬁned sub-instances, I1 = {G1, T , (s1, t1), (µθ1 , µθ2 ), (1, r), (Ce)e∈E1 } and I2 = {G2, T , (s2, t2), (µθ1 , µθ2 ), (1, r), (Ce)e∈E2 }, respectively. In a similar manner, y1(1) and y1(2) represent equilibria for the instances I1 = {G1, T , (s1, t1), (µθ1 , µθ2 ), (1, 1), (Ce)e∈E1 } and I2 = {G2, T ,

(s2, t2), (µθ1 , µθ2 ), (1, 1), (Ce)e∈E2 }, respectively. These are formally summarized in the notation table below.

TABLE II NOTATION TABLE PROVIDING DIFFERENT INSTANCE DEFINITIONS AND IDENTIFYING THE NASH EQUILIBRIUM (N.E.) FOR EACH SUB-INSTANCE
WHEN G1 AND G2 ARE CONNECTED IN SERIES.

Game Instance Deﬁnition

N.E.

I {G, T , (s, t), (µθ1 , µθ2 ), (1, r), (Ce)e∈E }

y

I1 {G1, T , (s1, t1), (µθ1 , µθ2 ), (1, r), (Ce)e∈E1 } y(1)

I2 {G2, T , (s2, t2), (µθ1 , µθ2 ), (1, r), (Ce)e∈E2 } y(2)

I {G, T , (s, t), (µθ1 , µθ2 ), (1, 1), (Ce)e∈E } y1

I1 {G1, T , (s1, t1), (µθ1 , µθ2 ), (1, 1), (Ce)e∈E1 } y1(1)

I2 {G2, T , (s2, t2), (µθ1 , µθ2 ), (1, 1), (Ce)e∈E2 } y1(2)

Proceeding with the proof, we know from (43) that for any path p ∈ P with ypθ1 > 0, e∈p Ce(ye) ≤ e∈p Ce(ye1). Dividing the path p into sub-paths p1 and p2 representing its
intersection with G1, G2 respectively, we get that

e∈p1 Ce(ye) + e∈p2 Ce(ye) ≤ e∈p1 Ce(ye1) + e∈p2 Ce(ye1).

Based on the above inequality, we infer one of the following two cases must be true:

e∈p1 Ce(ye) ≤ e∈p1 Ce(ye1) (44)

or e∈p2 Ce(ye) ≤ e∈p2 Ce(ye1). (45)

Separately, we prove the inductive claim for each case.

Suppose that (44) holds. Since the graph G1 is linearly

independent, we can apply the inductive claim to instances

I1 and I1 to get that y(1)θp1 ≤ y1(1)p for every path p ∈ P1. However, recall that G2 consists of only one edge (call it

e2). This implies that there is a one-to-one correspondence

between every path in P and path in P1. Speciﬁcally, for

every path p ∈ P, there exists a unique path p1 ∈ P1 such

that p = p1 ∪ {e2}. Since the mapping is a bijection, this

implies that for every p = p1 ∪ {e2}, it must be the case that ypθ1 = y(1)θp11 and yp1 = y1(1)p1 . Informally, the addition of a single common edge to all paths does not alter the ﬂow

distribution. Therefore, we can conclude that for every path

p ∈ P,

ypθ1 = y(1)θp11 ≤ y1(1)p1 = yp1.

This proves the inductive claim for this case.
Next, suppose that (45) holds. Once again, since G2 con-
sists of a single edge e2, the condition implies that ye2 = y(2)e2 ≤ ye12 = y1(2)e2 . Thus, we infer that conditional upon
e∈p2 Ce(ye) ≤ e∈p2 Ce(ye1), µθ1 + µθ2 ≤ µθ1 + µθ2 . That is, the total population for instance I is smaller than or equal
to the total population for instance I .
Since linearly independent networks are a special case of
series-parallel, we can now apply [23, Lemma 3] for ﬂows y(1) and y1(1) on graph G1. Since µθ1 + µθ2 ≤ µθ1 + µθ2 , this of course, implies that there exists at least one origindestination path p∗ in G1 with y1(1)p∗ > 0 satisfying
e∈p∗ Ce(y(1)e) ≤ e∈p∗ Ce(y1(1)e). Therefore, we can conclude that for any path p ∈ P1 with ypθ1 > 0, we have,

e∈p Ce(y(1)e) ≤ e∈p Ce(y1(1)e).

(46)

The above equation symbolizes the induction condition as
described in (43). Applying the inductive hypothesis recursively to instances I1, I1, and using the same reasoning as before, we conclude that for every s-t path p ∈ P, ypθ1 ≤ yp1. This concludes the proof for the series case.
(case 2) Subgraphs G1, G2 connected in parallel to obtain G. The proof for this case proceeds similarly to the case
where the networks are connected in series. Once again, we divide the ﬂows y and y1 into sub-ﬂows y(1), y(2) and y1(1) and y1(2). Moreover, we use µθ1 (1), µθ2 (1) to denote the total ﬂow without and with uncertainty in sub-graph G1 and similarly so, for all the other subgraphs and sub-ﬂows. A
comprehensive notation table is listed below.

TABLE III NOTATION TABLE PROVIDING DIFFERENT INSTANCE DEFINITIONS AND IDENTIFYING THE NASH EQUILIBRIUM (N.E.) FOR EACH SUB-INSTANCE
WHEN G1 AND G2 ARE CONNECTED IN PARALLEL.

Game Instance Deﬁnition

N.E.

I {G, T , (s, t), (µθ1 , µθ2 ), (1, r), (Ce)e∈E }

y

I1 {G1, T , (s, t), (µθ1 (1), µθ2 (1), (1, r), (Ce)e∈E1 } y(1)

I2 {G2, T , (s, t), (µθ1 (2), µθ2 (2)), (1, r), (Ce)e∈E2 } y(2)

I {G, T , (s, t), (µθ1 , µθ2 ), (1, 1), (Ce)e∈E } y1

I1 {G1, T , (s, t), (µθ1 (1), µθ2 (1), (1, 1), (Ce)e∈E1 } y1(1)

I2 {G2, T , (s, t), (µθ1 (2), µθ2 (2), (1, 1), (Ce)e∈E2 } y1(2)

Before applying the inductive claim recursively to the two subgraphs, we need to verify that the condition speciﬁed in (43) is satisﬁed for the subgraphs. We know that the instances I, I satisfy the condition in (43) (this is part of our assumption). That is, for any p ∈ P such that ypθ1 > 0

e∈p Ce(ye) ≤ e∈p Ce(ye1).

(47)

Since the graphs G1, G2 are connected in parallel, the set of
edges and paths in each graph are disjoint. In other words,
P = P1 ∪ P2. Moreover, the path-ﬂows in y coincide with those in y(1) or y(2)—e.g., for any p1 ∈ P1, we have that yp1 = y(1)p1 and so on. This combined with (47) implies that for any path p1 ∈ P1 with y(1)θp11 > 0,
e∈p1 Ce(y(1)e) ≤ e∈p1 Ce(y1(1)e). Therefore, the ﬂows y(1) and y1(1) satisfy the inductive condition. Similarly, we can show that the ﬂows y(2) and y1(2) also satisfy (43).
Applying the inductive claim to the instances I1 and I1, we get that
y(1)θp11 ≤ y1(1)p1 ∀p1 ∈ P1 (48)

Similarly, we can apply the inductive claim to instance pair I2, I2 to get that

y(2)θp12 ≤ y1(2)p2 ∀p2 ∈ P2 (49)

Since y = y(1) ∪ y(2) and y1 = y1(1) ∪ y1(2), the inductive
claim follows immediately. That is, merging the statements in (48) and (49), we get that for all p ∈ P, the inequality ypθ1 ≤ yp1 holds. This completes the proof.

D. Technical Claims
Lemma 4: Given any convex, continuously differentiable, non-decreasing function f (x), for any x1, x2 ≥ 0 in its domain, we have that

f (x2) − f (x1) ≤ f (x2)(x2 − x1),

(50)

where f (x2) is the derivative of f (x) evaluated at x2. Proof: We prove the result in two cases. First, suppose
that x2 ≥ x1. Since f (x) is convex, non-decreasing, it must mean that its derivative f (x) is also non-negative and nondecreasing, and therefore, f (x2) ≥ f (x) for all x ∈ [x1, x2] Therefore, we have that
f (x2) − f (x1) ≤ xx=2x1 f (x2)dx = f (x2)(x2 − x1).
Next, consider the case when x2 ≤ x1. In this case, f (x2)− f (x1) is negative or zero. So, similar to the above case we have that
f (x1) − f (x2) ≥ xx=2x1 f (x2)dx = f (x2)(x1 − x2).
Reversing the above inequality gives us the lemma.
REFERENCES
[1] A. Parekh and J. Walrand, Sharing Network Resources, R. Srikant, Ed. Morgan and Claypool, 2014.
[2] S. Stidham Jr., “Pricing and congestion management in a network with heterogeneous users,” IEEE Trans. Automat. Contr., vol. 49, no. 6, pp. 976–981, 2004.
[3] I. Stupia, L. Sanguinetti, G. Bacci, and L. Vandendorpe, “Power control in networks with heterogeneous users: A quasi-variational inequality approach,” IEEE Trans. Signal Processing, vol. 63, no. 21, pp. 5691– 5705, 2015.
[4] R. E. Azouzi and E. Altman, “Constrained trafﬁc equilibrium in routing,” IEEE Trans. Automat. Contr., vol. 48, no. 9, pp. 1656–1660, 2003.
[5] G. Devetag and M. Warglien, “Playing the wrong game: An experimental analysis of relational complexity and strategic misrepresentation,” Games and Economic Behavior, vol. 62, no. 2, pp. 364–382, 2008.
[6] S. Gao, E. Frejinger, and M. Ben-Akiva, “Cognitive cost in route choice with real-time information: An exploratory analysis,” Transportation Research Part A, vol. 45, no. 9, pp. 916–926, 2011.
[7] C. Chen, A. Skabardonis, and P. Varaiya, “Travel-time reliability as a measure of service,” Transportation Research Record: J. Transportation Research Board, no. 1855, pp. 74–79, 2003.
[8] G. Pierce and D. Shoup, “Getting the prices right: an evaluation of pricing parking by demand in san francisco,” J. American Planning Association, vol. 79, no. 1, pp. 67–81, 2013.
[9] B. Schaller, “New york city’s congestion pricing experience and implications for road pricing acceptance in the united states,” Transport Policy, vol. 17, no. 4, pp. 266–273, 2010.
[10] P. N. Brown and J. R. Marden, “The robustness of marginal-cost taxes in afﬁne congestion games,” IEEE Trans. Automat. Contr., vol. 62, no. 8, pp. 3999–4004, 2017.
[11] “How and why road-pricing will happen,” The Economist, Aug. 2017. [Online]. Available: https://www.economist.com/news/international/ 21725765-ride-sharing-and-electric-cars-take-governments-are-seeking-new-ways-mak
[12] D. Schrank, B. Eisele, T. Lomax, and J. Bak, “2015 urban mobility scorecard,” Texas A&M Transportation Institute, 2015.
[13] A. Mortazavi, X. Pan, E. Jin, M. Odioso, and Z. Sun, “Travel Times on Changeable Message Signs Volume II–Evaluation of Transit Signs,” University of California, Berkeley, 2009.
[14] W. Krichene, J. Reilly, S. Amin, and A. M. Bayen, “Stackelberg routing on parallel networks with horizontal queues,” IEEE Trans. Automat. Contr., vol. 59, no. 3, pp. 714–727, 2014.
[15] J. Thai, N. Laurent-Brouty, and A. M. Bayen, “Negative externalities of gps-enabled routing applications: A game theoretical approach,” in Proc. 19th IEEE Inter. Conf. Intelligent Transportation Systems, 2016, pp. 595–601.
[16] M. Wu, J. Liu, and S. Amin, “Informational aspects in a class of bayesian congestion games,” in Proc. Amer. Control Conf., 2017, pp. 3650–3657.
[17] H. Tavafoghi and D. Teneketzis, “Informational incetives in congestion games,” in 55th Annual Allerton Conference on Communication, Control, and Computing. IEEE, 2017.
[18] Y. A. Korilis, A. A. Lazar, and A. Orda, “Capacity allocation under noncooperative routing,” IEEE Trans. Automat. Contr., vol. 42, no. 3, pp. 309–325, 1997.
[19] D. Acemoglu, A. Makhdoumi, A. Malekian, and A. Ozdaglar, “Informational Braess’ paradox: The effect of information on trafﬁc congestion,” arXiv:1601.02039, 2016.

[20] F. Farokhi, W. Krichene, A. M. Bayen, and K. H. Johansson, “A heterogeneous routing game,” in Proc. 51st Annual Allerton Conf. Communication, Control, and Computing, 2013, pp. 448–455.
[21] L. Qiu, Y. R. Yang, Y. Zhang, and S. Shenker, “On selﬁsh routing in internet-like environments,” in Proc. 2003 ACM Conf. Applications, technologies, architectures, and protocols for computer communications, 2003, pp. 151–162.
[22] T. Roughgarden and E´ . Tardos, “How bad is selﬁsh routing?” J. ACM, vol. 49, no. 2, pp. 236–259, 2002.
[23] I. Milchtaich, “Network topology and the efﬁciency of equilibrium,” Games and Economic Behavior, vol. 57, no. 2, pp. 321–346, 2006.
[24] D. Fotakis, D. Kalimeris, and T. Lianeas, “Improving selﬁsh routing for risk-averse players,” in Proc. 11th Inter. Conf. Web and Internet Economics, 2015, pp. 328–342.
[25] E. Nikolova and N. E. S. Moses, “The burden of risk aversion in mean-risk selﬁsh routing,” in Proc. 16th ACM Conf. Economics and Computation, 2015, pp. 489–506.
[26] E. Altman, T. Basar, and R. Srikant, “Nash equilibria for combined ﬂow control and routing in networks: asymptotic behavior for a large number of users,” IEEE Trans. Automat. Contr., vol. 47, no. 6, pp. 917–930, 2002.
[27] T. Jelinek, M. Klaas, and G. Scha¨fer, “Computing optimal tolls with arc restrictions and heterogeneous players,” in Proc. 31st Inter. Symp. on Theoretical Aspects of Computer Science, 2014, pp. 433–444.
[28] A. Tversky and D. Kahneman, “Judgment under uncertainty: Heuristics and biases,” in Utility, probability, and human decision making. Springer, 1975, pp. 141–162.
[29] M. Mavronicolas, I. Milchtaich, B. Monien, and K. Tiemann, “Congestion games with player-speciﬁc constants,” in Proc. 32nd Intl. Symp. Math. Found. Comput. Sci., 2007, pp. 633–644.
[30] R. Meir and D. C. Parkes, “Congestion games with distance-based strict uncertainty,” in Proc. 29th AAAI Conf. Artiﬁcial Intelligence, 2015, pp. 986–992.
[31] T. Qi, J. Chen, W. Su, and M. Fu, “Control under stochastic multiplicative uncertainties: Part i, fundamental conditions of stabilizability,” IEEE Trans. Automat. Contr., vol. 62, no. 3, pp. 1269–1284, 2017.
[32] L. Fleischer, K. Jain, and M. Mahdian, “Tolls for heterogeneous selﬁsh users in multicommodity networks and generalized congestion games,” in Proc. 45th Symp. on Foundations of Computer Science, 2004, pp. 277–285.
[33] D. Monderer and L. S. Shapley, “Potential games,” Games and economic behavior, vol. 14, no. 1, pp. 124–143, 1996.
[34] J. Liu, S. Amin, and G. Schwartz, “Effects of information heterogeneity in bayesian routing games.” arXiv:1603.08853v1, 2016.
[35] R. Colini-Baldeschi, M. Klimm, and M. Scarsini, “Demand-independent tolls,” arXiv preprint arXiv:1708.02737, 2017.
[36] H. C. Manual, “Special report 209,” Transportation Research Board, Washington, DC, vol. 1, p. 985, 1985.
[37] E. Altman, T. Basar, T. Jime´nez, and N. Shimkin, “Competitive routing in networks with polynomial costs,” IEEE Trans. Automat. Contr., vol. 47, no. 1, pp. 92–96, 2002.
[38] D. Calderone, E. Mazumdar, L. J. Ratliff, and S. S. Sastry, “Understanding the impact of parking on urban mobility via routing games on queue-ﬂow networks,” in Proc. IEEE 55th Conf. Decision and Control, 2016, pp. 7605–7610.
[39] T. Roughgarden, “Routing games,” in Algorithmic game theory. Cambridge University Press New York, 2007, ch. 18, pp. 459–484.
[40] D. Acemoglu and A. E. Ozdaglar, “Competition in parallel-serial networks,” IEEE J. Selected Areas in Communications, vol. 25, no. 6, pp. 1180–1192, 2007.
[41] C. Dowling, T. Fiez, L. Ratliff, and B. Zhang, “How much urban trafﬁc is searching for parking?” arXiv:1702.06156, 2017.
[42] D. Shoup and H. Campbell, “Gone parkin’,” The New York Times, vol. 29, 2007.
[43] L. J. Ratliff, C. Dowling, E. Mazumdar, and B. Zhang, “To observe or not to observe: Queuing game framework for urban parking,” in Proc. 55th IEEE Conf. Decision and Control, 2016, pp. 5286–5291.
[44] A. Tversky and D. Kahneman, “Loss aversion in riskless choice: A reference-dependent model,” The Quarterly J. Economics, vol. 106, no. 4, pp. 1039–1061, 1991.

